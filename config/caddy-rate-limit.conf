http://localhost:8081 {
  encode gzip

  # Rate limiting (20 req/s per IP) - Only for /api/unprotected
  @rateLimited {
    path /api/unprotected
  }
  handle @rateLimited {
    rate_limit {
      zone global_limit {
        key {remote_ip}
        events 20
        window 1s
      }
    }
  }

  # Reverse proxy - Placed last
  reverse_proxy http://localhost:3000

  # Disable caching
  header {
    Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0"
    Pragma "no-cache"
    Expires "0"
  }
}